(()=>{"use strict";class t{constructor(){this.score=0,this.miss=0,this.interval=null}}class s{constructor(s){this.fields=s,this.randomField=null,this.isHit=!1,this.interval=null,this.gameState=new t,this.firstMove=!0,this.onClick=this.onClick.bind(this),this.fields.forEach((t=>{t.addEventListener("click",this.onClick)}))}setRandomNumber(){let t=Math.floor(Math.random()*(this.fields.length-1));for(;t===this.randomField;)t=Math.floor(Math.random()*(this.fields.length-1));return this.randomField=t,t}removeActiveClass(){const t=this.fields.filter((t=>t.classList.contains("game-field-active")))[0];t&&t.classList.remove("game-field-active")}addActiveClass(){this.fields[this.setRandomNumber()].classList.add("game-field-active")}moveGoblin(){this.interval=setInterval((()=>{this.isHit||(this.firstMove?this.firstMove=!1:this.miss()),this.isHit&&(this.isHit=!1),this.removeActiveClass(),this.addActiveClass()}),1e3)}clearInterval(){this.isHit=!0,clearInterval(this.interval)}showScore(){document.querySelector(".score-number").textContent=this.gameState.score}showMiss(){5===this.gameState.miss&&this.gameOver(),document.querySelector(".miss-number").textContent=this.gameState.miss}onClick(t){"game-field game-field-active"===t.target.className&&(this.gameState.score+=1,this.showScore(),this.clearInterval(),this.removeActiveClass(),this.moveGoblin())}miss(){this.gameState.miss+=1,this.showMiss()}gameOver(){this.clearInterval(),alert("Вы проиграли")}}const e=Array.from(document.querySelectorAll(".game-field"));new class{constructor(t){this.gameField=new s(t)}start(){this.gameField.moveGoblin()}}(e).start()})();